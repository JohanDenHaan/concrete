<html>
	<head>
		<link rel="stylesheet" href="../themes/cobalt.css" type="text/css" />		
		<link rel="stylesheet" href="style.css" type="text/css" />
		<script src="../../redist/prototype.js" type="text/javascript"></script>
		<script src="../../redist/scriptaculous/scriptaculous.js" type="text/javascript"></script>
		<script src="../../concrete/concrete.js" type="text/javascript"></script>
		<script src="example_data/example1.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="templates1" style="display: none">
			<div class="ct_element ctc_Fraction" style="display: inline-block">
				<div class="ct_containment ctn_expr1" style="text-align: center; border-bottom: 1px solid white"><span style="display: inline-block; padding: 3px"><span class="ct_slot"></span></span></div>
				<div class="ct_containment ctn_expr2" style="text-align: center"><span style="display: inline-block; padding: 3px"><span class="ct_slot"></span></span></div>
			</div>			
			<div class="ct_element ctc_Sqrt" style="display: inline-block">
				<div>
					<div class="ct_containment ctn_expr" style=""><span style="display: inline-block; padding: 3px"><span class="ct_slot"></span></span></div>
				</div>
			</div>			
			<div class="ct_element ctc_Mult" style="display: inline-block">
				(<span class="ct_containment ctn_expr1" style="vertical-align: middle"><span class="ct_slot"></span></span>
				<span class="ct_handle" style="vertical-align: middle">*</span>
				<span class="ct_containment ctn_expr2" style="vertical-align: middle"><span class="ct_slot"></span></span>)
			</div>
			<div class="ct_element ctc_Plus" style="display: inline-block">
				(<span class="ct_containment ctn_expr1" style="vertical-align: middle"><span class="ct_slot"></span></span>
				<span class="ct_handle" style="vertical-align: middle">+</span>
				<span class="ct_containment ctn_expr2" style="vertical-align: middle"><span class="ct_slot"></span></span>)
			</div>
			<span class="ct_element ctc_Value">
				<span class="ct_handle">v</span>
				(<span class="ct_attribute ctn_value"><span class="ct_slot"></span></span>)
			</span>		
			<span class="ct_element ctc_Neg">
				<span class="ct_handle"></span>
				-(<span class="ct_containment ctn_expr"><span class="ct_slot"></span></span>)
			</span>		
		</div>
		<div id="metamodel1" style="display: none">
[{"_class": "Datatype", "name": "String"}, 
{"_class": "Class", "name": "Expression", "abstract": true}, 
{"_class": "Class", "name": "Sqrt", "superTypes": "Expression", "features": 
  {"_class": "Feature", "name": "expr", "kind": "containment", "lowerLimit": 1, "upperLimit": 1, "type": "Expression"}}, 
{"_class": "Class", "name": "Fraction", "superTypes": "Expression", "features": [
  {"_class": "Feature", "name": "expr1", "kind": "containment", "lowerLimit": 1, "upperLimit": 1, "type": "Expression"}, 
  {"_class": "Feature", "name": "expr2", "kind": "containment", "lowerLimit": 1, "upperLimit": 1, "type": "Expression"}]}, 
{"_class": "Class", "name": "Mult", "superTypes": "Expression", "features": [
  {"_class": "Feature", "name": "expr1", "kind": "containment", "lowerLimit": 1, "upperLimit": 1, "type": "Expression"}, 
  {"_class": "Feature", "name": "expr2", "kind": "containment", "lowerLimit": 1, "upperLimit": 1, "type": "Expression"}]}, 
{"_class": "Class", "name": "Plus", "superTypes": "Expression", "features": [
  {"_class": "Feature", "name": "expr1", "kind": "containment", "lowerLimit": 1, "upperLimit": 1, "type": "Expression"}, 
  {"_class": "Feature", "name": "expr2", "kind": "containment", "lowerLimit": 1, "upperLimit": 1, "type": "Expression"}]}, 
{"_class": "Class", "name": "Neg", "superTypes": "Expression", "features": 
  {"_class": "Feature", "name": "expr", "kind": "containment", "lowerLimit": 1, "upperLimit": 1, "type": "Expression"}}, 
{"_class": "Class", "name": "Value", "superTypes": "Expression", "features": 
  {"_class": "Feature", "name": "value", "kind": "attribute", "lowerLimit": 1, "upperLimit": 1, "type": "String"}}]
		</div>
		<div class="ct_editor" id="editor1">
		</div>

    <p><input type="button" onclick="ed.setModel(ExampleData);" value="Load example" /> Discards existing model!</p>

		<textarea id="clipboard1" style="background-color: white; color: black; border: 1px solid grey" cols="80" rows="10" wrap="off"></textarea>
		</div>
		<script type="text/javascript" language="javascript" charset="utf-8">
			// <![CDATA[
			var tp = new Concrete.TemplateProvider($("templates1"));
			var mp = new Concrete.MetamodelProvider($("metamodel1").textContent.evalJSON());
			var ip = new Concrete.QualifiedNameBasedIdentifierProvider("name");
			var cb = new Concrete.Clipboard($("clipboard1"));
			var ed = new Concrete.Editor($("editor1"), tp, mp, ip, {clipboard: cb});
			
			Event.observe(window, 'click', function(event) {
				ed.handleEvent(event)	
			});
			Event.observe(window, 'keydown', function(event) {
				ed.handleEvent(event)
			});
			Event.observe(window, 'mousemove', function(event) {
				ed.handleEvent(event);
			});
			// ]]>
		</script>
	</body>
</html>
