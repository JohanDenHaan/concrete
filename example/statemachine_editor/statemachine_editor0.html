<html>
	<head>
		<link rel="stylesheet" href="style0.css" type="text/css" />
		<link rel="stylesheet" href="../themes/light_blue.css" type="text/css" />
		<link rel="stylesheet" href="../themes/fold_button_dots_when_hidden.css" type="text/css" />
		<script src="../../redist/prototype.js" type="text/javascript"></script>
		<script src="../../redist/scriptaculous/scriptaculous.js" type="text/javascript"></script>
		<script src="../../concrete/concrete.js" type="text/javascript"></script>
		<script src="example_data/example1.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="templates1" style="display: none">	
   </div>

		<div id="metamodel1" style="display: none">
[{"_class": "Datatype", "name": "String"}, 
{"_class": "Class", "name": "Statemachine", "features": [
  {"_class": "Feature", "name": "name", "kind": "attribute", "lowerLimit": 1, "upperLimit": 1, "type": "String"}, 
  {"_class": "Feature", "name": "states", "kind": "containment", "type": "State"}]}, 
{"_class": "Class", "name": "State", "abstract": true, "features": [
  {"_class": "Feature", "name": "name", "kind": "attribute", "lowerLimit": 1, "upperLimit": 1, "type": "String"}, 
  {"_class": "Feature", "name": "transitions", "kind": "containment", "upperLimit": -1, "type": "Transition"}]}, 
{"_class": "Class", "name": "SimpleState", "superTypes": "State"}, 
{"_class": "Class", "name": "CompositeState", "superTypes": "State", "features": 
  {"_class": "Feature", "name": "subStates", "kind": "containment", "upperLimit": -1, "type": "State"}}, 
{"_class": "Class", "name": "Transition", "features": 
{"_class": "Feature", "name": "targetState", "kind": "reference", "lowerLimit": 1, "upperLimit": 1, "type": "State"}}]
   </div>

		<div class="ct_editor" id="editor1">
    </div>

    <p><input type="button" onclick="ed.setModel(ExampleData);" value="Load example" /> Discards existing model!</p>

		<textarea id="clipboard1" style="background-color: white; color: black; border: 1px solid grey" cols="80" rows="10" wrap="off"></textarea>

		<script type="text/javascript" language="javascript" charset="utf-8">
			// <![CDATA[
				var tp = new Concrete.TemplateProvider($("templates1"), {identifierAttribute: "name"});
				var mp = new Concrete.MetamodelProvider($("metamodel1").textContent.evalJSON());
				var ip = new Concrete.QualifiedNameBasedIdentifierProvider({nameAttribute: "name"});
				var cb = new Concrete.Clipboard($("clipboard1"));
        var ed = new Concrete.Editor($("editor1"), tp, mp, ip, {clipboard: cb});
					
				Event.observe(window, 'click', function(event) {
					ed.handleEvent(event);
				});
				Event.observe(window, 'keydown', function(event) {
					ed.handleEvent(event);
				});
				Event.observe(window, 'mousemove', function(event) {
					ed.handleEvent(event);
				});
			// ]]>
		</script>
	</body>
</html>
